#!/usr/bin/perl -w

use strict;
my %lat = (
        'а', 'a',
        'б', 'b',
        'в', 'v',
        'г', 'g',
        'д', 'd',
        'е', 'e',
        'ё', 'e',
        'ж', 'zh',
        'з', 'z',
        'и', 'i',
        'й', 'j',

        'к', 'k',
        'л', 'l',
        'м', 'm',
        'н', 'n',
        'о', 'o',
        'п', 'p',
        'р', 'r',
        'с', 's',
        'т', 't',
        'у', 'u',
        'ф', 'f',

        'х', 'kh',
        'ц', 'ts',
        'ч', 'ch',
        'ш', 'sh',
        'щ', 'sch',
        'ъ', 'x',
        'ы', 'y',
        'ь', 'x',
        'э', 'e',
        'ю', 'yu',
        'я', 'ya',

        'А', 'A',
        'Б', 'B',
        'В', 'V',
        'Г', 'G',
        'Д', 'D',
        'Е', 'E',
        'Ё', 'E',
        'Ж', 'ZH',
        'З', 'Z',
        'И', 'I',
        'Й', 'J',

        'К', 'K',
        'Л', 'L',
        'М', 'M',
        'Н', 'N',
        'О', 'O',
        'П', 'P',
        'Р', 'R',
        'С', 'S',
        'Т', 'T',
        'У', 'U',
        'Ф', 'F',

        'Х', 'KH',
        'Ц', 'TS',
        'Ч', 'CH',
        'Ш', 'SH',
        'Щ', 'SCH',
        'Ъ', 'X',
        'Ы', 'Y',
        'Ь', 'X',
        'Э', 'E',
        'Ю', 'YU',
        'Я', 'YA'
);

my $rus = join ('|',  keys %lat);

while (<>) {
	print translit($_);
};

sub translit {
        my $str = shift;

        $str =~ s/[\t ]+/_/g;
        $str =~ s/[\"\`]/\'/g;
        $str =~ s/[<>]/\'/g;

        $str =~ s/($rus)/$lat{$1}/g;

        return $str;
};
